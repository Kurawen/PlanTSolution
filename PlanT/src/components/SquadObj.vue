<script setup>
import { ref, computed } from 'vue'
import SquadOtdel from './SquadOtdel.vue'
import SquadRoleCreate from './SquadRoleCreate.vue'

const showSquadOtdel = ref(false)
const showAssignRoles = ref(false)

const openSquadOtdelModal = () => {
    showSquadOtdel.value = true
}

const closeSquadOtdelModal = () => {
    showSquadOtdel.value = false
}

const openRoleCreateModal = () => {
    showAssignRoles.value = true
}

const closeRoleCreateModal = () => {
    showAssignRoles.value = false
}

const props = defineProps({
    title: {
        type: String,
        default: "–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã"
    },
    description: {
        type: String,
        default: "–û–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã"
    },
    memberCount: {
        type: Number,
        default: 0
    },
})

const squadDetails = {
    name: props.title,
    description: props.description,
    memberCount: props.memberCount,
    members: [
        { name: '–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤', role: '–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞', avatar: '–ò–ü' },
        { name: '–ú–∞—Ä–∏—è –°–º–∏—Ä–Ω–æ–≤–∞', role: '–í–µ–¥—É—â–∏–π –∞–Ω–∞–ª–∏—Ç–∏–∫', avatar: '–ú–°' },
        { name: '–ê–ª–µ–∫—Å–µ–π –í–æ–ª–∫–æ–≤', role: '–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫', avatar: '–ê–í' },
        { name: '–ï–ª–µ–Ω–∞ –ù–æ–≤–∏–∫–æ–≤–∞', role: '–î–∏–∑–∞–π–Ω–µ—Ä', avatar: '–ï–ù' }
    ],
    files: [
        { name: '–ü—Ä–æ–µ–∫—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è v2.0', type: 'DOCX', date: '15 –º–∞—Ä—Ç–∞ 2024 –≥.', icon: 'üìÑ' },
        { name: '–ü–ª–∞–Ω –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–æ–π –∫–∞–º–ø–∞–Ω–∏–∏ Q2', type: 'PDF', date: '10 –º–∞—Ä—Ç–∞ 2024 –≥.', icon: 'üìä' },
        { name: '–û—Ç—á–µ—Ç –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏', type: 'XLSX', date: '08 –º–∞—Ä—Ç–∞ 2024 –≥.', icon: 'üìà' }
    ]
}
</script>

<template>
    <div class="squad-obj">
        <h2 class="squad-title">{{ title }}</h2>
        <hr class="hrr">
        <p class="squad-desc">{{ description }}</p>
        <div class="squad-count">
            <img src="../assets/team.svg" alt="–∫–æ–º–∞–Ω–¥–∞" class="team-icon">
            <p class="squad-count-number">{{ memberCount }} —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</p>
        </div>
        <div class="squad-buttons">
            <button class="btn-gray btn-gray-md" @click="openSquadOtdelModal">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            <button class="btn-gray btn-gray-md" @click="openRoleCreateModal">–ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª–∏</button>
        </div>
    </div>

    <SquadOtdel 
        v-if="showSquadOtdel" 
        @close="closeSquadOtdelModal"
        :squad-data="squadDetails"
    />

    <SquadRoleCreate
        v-if="showAssignRoles" 
        @close="closeRoleCreateModal"
    />
</template>

<style scoped>
.hrr {
    color: var(--border-color);
    height: 1px;
    border: none;
    background-color: var(--border-color);
    width: 100%;
    margin: 0;
}

.squad-obj {
    display: flex;
    flex-direction: column;
    border: 1px solid var(--border-color);
    border-radius: 5px;
    padding: 15px;
    margin: 10px;
    max-width: 100%;
    width: max-content;
    background-color: white;
    gap: 12px;
}

.squad-title {
    font-size: 1.2rem;
    font-weight: bold;
    margin: 0;
}

.squad-desc {
    font-size: 0.9rem;
    color: black;
    margin: 0;
}

.squad-buttons {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.squad-but {
    background-color: white;
    color: black;
    font-size: 0.9rem;
    font-weight: 500;
    border: 1px solid var(--border-color);
    border-radius: 5px;
    padding: 12px 25px;
    cursor: pointer;
}

.squad-but:hover {
    background-color: #f5f5f5;
}

.squad-count {
    display: flex;
    align-items: center;
    justify-content: start;
    gap: 10px;
}

.squad-count-number {
    font-size: 0.9rem;
    margin: 0;
}

.team-icon {
    max-width: 20px;
    height: auto;
}
</style>